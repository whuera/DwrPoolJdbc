//>>built
(function(){function f(c){c.COOKIE||(c.COOKIE={},c.COOKIE.set=function(c,f,h){throw"Abstract";},c.COOKIE.get=function(c){throw"Abstract";});return c.ReloadExtension=function(f){function p(a){b&&null!==b.handshakeResponse&&(h(a),b.cookiePath=m,a=c.JSON.toJSON(b),d("Reload extension saving cookie value",a),c.COOKIE.set(k,a,{"max-age":n,path:m,expires:new Date((new Date).getTime()+1E3*n)}))}function h(a){a&&("number"===typeof a.cookieMaxAge&&(n=a.cookieMaxAge),"string"===typeof a.cookieName&&(k=a.cookieName),
"string"===typeof a.cookiePath&&(m=a.cookiePath))}var e,d,b=null,k="org.cometd.reload",m="/",n=5,l=!1;this.configure=h;this.registered=function(a,b){e=b;e.reload=p;d=e._debug};this.unregistered=function(){delete e.reload;e=null};this.outgoing=function(a){switch(a.channel){case "/meta/handshake":b={};b.url=e.getURL();var f=c.COOKIE.get(k);d("Reload extension found cookie value",f);if(f)try{var g=c.JSON.fromJSON(f);c.COOKIE.set(k,"",{"max-age":-1,path:g.cookiePath,expires:-1});if(g.handshakeResponse&&
b.url==g.url)return d("Reload extension restoring state",g),setTimeout(function(){d("Reload extension replaying handshake response",g.handshakeResponse);b.handshakeResponse=g.handshakeResponse;b.transportType=g.transportType;b.reloading=!0;var a=e._mixin(!0,{},b.handshakeResponse,{ext:{reload:!0}});a.supportedConnectionTypes=[b.transportType];e.receive(a);d("Reload extension replayed handshake response",a)},0),l||(l=!0,e.startBatch()),null;d("Reload extension could not restore state",g)}catch(h){d("Reload extension error while trying to restore cookie",
h)}break;case "/meta/connect":b.transportType||(b.transportType=a.connectionType,d("Reload extension tracked transport type",b.transportType));break;case "/meta/disconnect":b=null}return a};this.incoming=function(a){if(a.successful)switch(a.channel){case "/meta/handshake":b.handshakeResponse||(b.handshakeResponse=a,d("Reload extension tracked handshake response",a));break;case "/meta/disconnect":b=null;break;case "/meta/connect":l&&(e.endBatch(),l=!1)}return a};h(f)}}"function"===typeof define&&define.amd?
define("org/cometd/ReloadExtension",["org/cometd"],f):f(org.cometd)})();
//@ sourceMappingURL=ReloadExtension.js.map