//>>built
define("ec/fisa/controller/custom/PersonalTaskController","dojo/_base/kernel dojo/_base/declare dojo/_base/lang ./_base ec/fisa/controller/BaseController ec/fisa/mvc/StatefulModel dojo/dom-style ec/fisa/navigation/Utils".split(" "),function(e,f,l,m,g,h,k){return f("ec.fisa.controller.custom.PersonalTaskController",[g],{tabId:null,pageId:null,model:null,breadcrumb:null,bindingContentPane:null,dataGridPriorityList:null,componentIds:null,data:null,constructor:function(a,b,d){this.data=d||{};this.tabId=
a;this.pageId=b;this.dataGridPriorityList=d.dataGridPriorityList;this.model=new h({});this.componentIds=[]},setBindingContentPane:function(a){this.bindingContentPane=a},addParamToModel:function(a,b){this.componentIds.push(a.id);var d=null;this.data&&this.data[b]&&(d={value:this.data[b],complement:null});null==d?(d={value:"",complement:null},a._fStarted=!0):null==d.value&&(d.value="",a._fStarted=!0);if(this.model.contains(b))this.model.contains([b])&&this.model.setValue([b,"value"],d.value);else{this.model.appendObject([b,
"value"],d.value,a.id,"value",null,!1);var c=null;void 0!=d.enabled&&(c=d.enabled);this.model.appendObject([b,"enabled"],c,a.id,"enabled",null,!1);a.hasCompl&&this.model.appendObject([b,"complement"],d.complement,a.id,"complement",null,!1)}},setMessagesPanel:function(a){this.messagesPanelId=a.id;this.breadcrumbId=a.getParent().getParent().getParent().id},saveTask:function(){if(!0!=this.validate()){this.clearPanelMessage();var a={callbackScope:this};a.callback=this.handleWindowAction;a.errorHandler=
e.hitch(this,this.errorHandler);PersonalTaskControllerDWR.saveTask(this.model.toPlainObject(),a)}},markNotificationAsReaded:function(){var a=this.data.taskId;this.clearPanelMessage();var b={callbackScope:this};b.callback=this.handleWindowAction;b.errorHandler=e.hitch(this,this.errorHandler);PersonalTaskControllerDWR.markNotificationAsReaded(a,b)},cancelAction:function(){ec.fisa.navigation.utils.closeCurrentBreadCrumb(this.breadcrumbId)},handleWindowAction:function(a){if("close"==a.wAxn)ec.fisa.navigation.utils.closeCurrentBreadCrumb(this.breadcrumbId);
else if("cnfrm"==a.wAxn){var b=dijit.byId(this.messagesPanelId);b.clearAllMessages();var b=dijit.byId(this.breadcrumbId),d=b.selectedChildWidget.postClose,c=b.selectedChildWidget.postCloseArgs;ec.fisa.navigation.utils.showNewBreadCrumbConfirmation(a.confirmationDialogTitle,a.aMsgs,this.breadcrumbId,this.tabId,this.pageId,null,null,!1);b.selectedChildWidget.postClose=d;b.selectedChildWidget.postCloseArgs=c;b.selectedChildWidget.postCloseScope=ec.fisa.controller.utils.getPageController(c[0],c[1])}else"error"==
a.wAxn&&(b=dijit.byId(this.messagesPanelId),b.clearAllMessages(),this.updateMsgsPanel(a.aMsgs))},initPriorityOptions:function(a){a.set("options",this.dataGridPriorityList)},validate:function(){var a=!1;dojox.lang.functional.forIn(this.componentIds,function(b,d){var c=dijit.byId(b);void 0!=c&&null!=c&&(!1==a&&(void 0!=c._componentNode&&null!=c._componentNode?dijit.focus(c._componentNode.domNode):dijit.focus(c.domNode)),void 0!=c.hasErrorCmp&&!0===c.hasErrorCmp()?a=!0:void 0!=c.isValid&&!0===!c.isValid()&&
(a=!0))},this);return a},hideComponent:function(a){k.set(a,"display","none")}})});
//@ sourceMappingURL=PersonalTaskController.js.map