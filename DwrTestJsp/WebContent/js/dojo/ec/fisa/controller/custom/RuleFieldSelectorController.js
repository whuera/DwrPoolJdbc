//>>built
define("ec/fisa/controller/custom/RuleFieldSelectorController","dojo/_base/kernel dojo/_base/declare dojo/_base/lang ./_base ec/fisa/controller/BaseController dojo/data/ItemFileWriteStore".split(" "),function(d,g,q,r,n,l){return g("ec.fisa.controller.custom.RuleFieldSelectorController",[n],{tabId:"",pageScopeId:"",parentPageScopeId:"",parentBtId:"",parentFieldId:"",fieldsStore:null,variablesStore:null,fieldsGridId:"",variablesGridId:"",parentWidgetId:"",selectData:null,dataKey:null,initMsgs:null,
constructor:function(a,c,b,e,f,h,p,k,m,g){this.tabId=a;this.pageScopeId=c;this.parentPageScopeId=b;this.parentBtId=e;this.parentFieldId=f;this.fieldsStore=new l({data:{identifier:"id",label:"id",items:m.fields}});this.variablesStore=new l({data:{identifier:"id",label:"id",items:m.variables}});this.parentWidgetId=h;b=d.byId(h);d.setAttr(b,"tid",a);d.setAttr(b,"psid",c);this.selectData=k;this.dataKey=p;this.initMsgs=g},destroy:function(){var a=dijit.byId(this.fieldsGridId);delete this.fieldsStore;delete a.store;
a.destroy(!1);a=dijit.byId(this.variablesGridId);delete this.variablesStore;delete a.store;a.destroy(!1)},setMessagesPanel:function(a){this.inherited(arguments);this.breadcrumbId=ec.fisa.navigation.utils.obtainParentBreadCrumb(a).id;this.updateMsgsPanel(this.initMsgs);delete this.initMsgs},changeSelection:function(a){var c=null,b=null;if(this.fieldsGridId===a)c=dijit.byId(this.variablesGridId),b=dijit.byId(this.fieldsGridId);else if(this.variablesGridId===a)c=dijit.byId(this.fieldsGridId),b=dijit.byId(this.variablesGridId);
else return;!1==b._onSelectionUpdate?0<=c.selection.selectedIndex&&(c._onSelectionUpdate=!0,b._onSelectionUpdate=!0,c.selection.clear()):(c._onSelectionUpdate=!1,b._onSelectionUpdate=!1)},doSelect:function(){var a=dijit.byId(this.fieldsGridId),c=null;if(0<=a.selection.selectedIndex)c="F";else if(a=dijit.byId(this.variablesGridId),0<=a.selection.selectedIndex)c="V";else{this.updateMsgsPanel([{level:{level:3E4},summary:"Seleccione una opcion",detail:"Seleccione una opcion"}]);return}var b=a.getItem(a.selection.selectedIndex),
e={id:a.store.getIdentity(b),fieldName:a.store.getValue(b,"prompt"),btId:a.store.getValue(b,"btId")},f=a.store.getValue(b,"qtId");e.operator=a.store.getValue(b,"conditionDefault");e.conditionEnable=a.store.getValue(b,"conditionEnable");e.dbDataType=a.store.getValue(b,"dbDataType");if(null!=f&&(f=this.selectData[f],null!=f)){var h=a.store.getValue(b,"qtDescription"),g=a.store.getValue(b,"qtValue"),k=[];d.forEach(f,function(a){k.push({label:a["f"+h],value:a["f"+g]})},this);e.qtItems=k}a=d.byId(this.parentWidgetId);
b=d.getAttr(a,"rulescompid");dijit.byId(b).addItem(c,e,a)},close:function(){var a=d.byId(this.parentWidgetId),a=d.getAttr(a,"rulescompid");dijit.byId(a).closeFieldSelector()}})});
//@ sourceMappingURL=RuleFieldSelectorController.js.map