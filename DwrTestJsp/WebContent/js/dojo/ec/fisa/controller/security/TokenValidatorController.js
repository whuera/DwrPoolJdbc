//>>built
define("ec/fisa/controller/security/TokenValidatorController","dojo/_base/kernel dojo/_base/declare dojo/_base/lang ec/fisa/controller/security/BaseSecurityController dojo/dom-construct ec/fisa/widget/security/Keyboard ./_base ec/fisa/controller/Utils".split(" "),function(e,f,l,g,h,m,n){return f("ec.fisa.controller.security.TokenValidatorController",g,{breadcrumbId:null,tokenTextId:null,keyboardId:null,serviceId:null,isVirtualKeyboardEnable:!1,initMsgs:null,constructor:function(b,a,c,k,p){this.tabId=
b;this.pageScopeId=a;this.serviceId=k},setTokenTextId:function(b,a){this.tokenTextId=b.id;a&&"true"==a&&(this.isVirtualKeyboardEnable=!0,b.set("readOnly",!0))},validateToken:function(){var b={callbackScope:this};b.callback=this.handleWindowAction;b.errorHandler=e.hitch(this,this.errorHandler);if(this.isVirtualKeyboardEnable){var a=dijit.byId(this.keyboardId)._getValueAttr();TokenValidatorControllerDWR.validateEncodedToken(this.tabId,this.pageScopeId,this.serviceId,a,b)}else a=dijit.byId(this.tokenTextId).get("value"),
TokenValidatorControllerDWR.validateToken(this.tabId,this.pageScopeId,this.serviceId,a,b)},setMessagesPanel:function(b){this.inherited(arguments);if(!1==this.calledByDlg&&("undefined"===typeof this.breadcrumbId||null==this.breadcrumbId)){var a=ec.fisa.controller.utils.findCurrentBreadCrumb(b);a&&(this.breadcrumbId=a.id)}this.updateMsgsPanel(this.initMsgs);delete this.initMsgs},initKeyboard:function(b,a){var c=h.create("div",null,b.domNode);this.keyboard=new ec.fisa.widget.security.Keyboard({tabId:this.tabId,
pageScopeId:this.pageScopeId,tokenTextId:this.tokenTextId,data:a,isLogin:!0,onClick:function(b,a){this.inherited("onClick",arguments);var d=dijit.byId(this.tokenTextId),c=d.get("value");d.set("value",c+"*")},onClickSpecialBtn:function(b,a){this.inherited("onClickSpecialBtn",arguments);var c=dijit.byId(this.tokenTextId);"DELETE"==a&&(this._setValueAttr(""),c.set("value",""),this.setSelectedValueById(this.tokenTextId,""))}},c);this.keyboardId=this.keyboard.id;this.keyboard.registrySelectedValue(this.tokenTextId);
this.keyboard.startup()},close:function(){this.onCancelEvent();!1==this.calledByDlg&&ec.fisa.navigation.utils.closeCurrentBreadCrumb(this.breadcrumbId)}})});
//@ sourceMappingURL=TokenValidatorController.js.map