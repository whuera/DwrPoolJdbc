//>>built
require({cache:{"url:ec/fisa/lov/templates/ListOfValues.html":'\x3cdiv\x3e\n\x3ctable border\x3d"0" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"fisaLov"\x3e\n\t\x3ctbody\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd\x3e\n\t\t\t\x3cdiv id\x3d"${id}_textBox" dojoType\x3d"dijit.form.TextBox" tabIndex\x3d"${_tabIndex}"\n\t\t\t\tdata-dojo-attach-point\x3d"_textBox" ${_initialValue} ${_readOnlyExpr}\n\t\t\t\tbaseClass\x3d"${textboxBaseClass}" data-dojo-props\x3d\'${_dojoProps}\' ${_maxLengthExp}\x3e\x3c/div\x3e\n\t\t\t\x3c/td\x3e\n\t\t\t\x3ctd class\x3d"buttonTd"\x3e\n\t\t\t\x3cbutton id\x3d"${id}_button" dojoType\x3d"dijit.form.Button" ${_readOnlyExprButton}\n\t\t\t\tclass\x3d"${selectBaseClass}" iconClass\x3d"${selectIconClass}" tabIndex\x3d"${_tabIndex}"\n\t\t\t\tshowLabel\x3d"false" data-dojo-attach-point\x3d"_button"\x3e\x3c/button\x3e\n\t\t\t\x3c/td\x3e\n\t\t\t\x3ctd\x3e\n\t\t\t\x3cdiv id\x3d"${id}_complement" dojoType\x3d"ec.fisa.widget.OutputText"\n\t\t\t\tdata-dojo-attach-point\x3d"_complementNode"\n\t\t\t\tbaseClass\x3d"${complementBaseClass}"\x3e\x3c/div\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\x3c/tbody\x3e\n\x3c/table\x3e\n\x3c/div\x3e\n',
"url:ec/fisa/widget/ListOfValues.conf":"{\n\tfisaClassic:{\n\t\ttextCharWidth:11,\n\t\ttextCharHeight:17,\n\t\tbuttonWidth:25,\n\t\tdefaultVisualSize:20,\n\t\tdialogWidthOffset:25,\n\t\tgridOffset:40\n\t},\n\tfisaDesert:{\n\t\ttextCharWidth:11,\n\t\ttextCharHeight:17,\n\t\tbuttonWidth:25,\n\t\tdefaultVisualSize:20,\n\t\tdialogWidthOffset:25,\n\t\tgridOffset:40\n\t}\n\n}"}});
define("ec/fisa/lov/ListOfValues","dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-attr dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/on dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!ec/fisa/lov/templates/ListOfValues.html dijit/form/Button dijit/form/TextBox ec/fisa/widget/Utils dojo/text!ec/fisa/widget/ListOfValues.conf ec/fisa/widget/OutputText ec/fisa/controller/custom/BtController ec/fisa/controller/custom/QtController ec/fisa/dwr/proxy/EventActionDWR".split(" "),function(r,
B,s,C,l,t,u,D,v,w,x,y,z,E,F,G,A){return r("ec.fisa.lov.ListOfValues",[w,x,y],{_textBox:null,_button:null,_complementNode:null,_readOnlyExpr:"",_readOnlyExprButton:"",_initialValue:"",readOnly:!1,editable:!1,description:"",selectLabel:"",selectLabelOrig:"",hasFieldRoutineOrPolicy:null,templateString:z,hasCompl:!0,textboxBaseClass:"dijitTextBox",selectIconClass:"magnifierIcon",selectBaseClass:"fisaLov",complementBaseClass:"fisaLink",maxLength:-1,_maxLengthExp:"",qtTitle:"",textTransform:"",_dojoProps:"trim:true",
parentEditableGrid:!1,gridId:"",gridSelectedRowIndex:null,onChangeTextBoxConnect:null,parentType:"",_fromSelection:!1,tabIndexField:null,_tabIndex:0,_buttonId:"",_destroyOnRemove:!0,visualSize:-1,btPos:0,actionMode:"",gridRealRowIndex:null,numeric:!1,listOfValuesConfig:dojo.fromJson(A),postMixInProperties:function(){this.inherited(arguments);!1==this.editable&&(this._readOnlyExpr="disabled",this.selectBaseClass="fisaLovOnlySelect");!0==this.readOnly&&(this._readOnlyExprButton=this._readOnlyExpr="disabled",
this.selectBaseClass="fisaLovDisabled");0<=this.maxLength&&(this._maxLengthExp="maxLength\x3d'"+this.maxLength+"'");var a=this.getController();this._initialValue="value\x3d'";this.parentEditableGrid?(this._initialValue+=this["initial-value"],delete this["initial-value"]):(a=a.obtainInitialValue(this),null!=a&&(this._initialValue+=a));this._initialValue+="'";this.readOnly&&(this.selectLabelOrig=this.selectLabel,this.selectLabel="");"1"==this.textTransform?this._dojoProps+=", uppercase:true ":"2"==
this.textTransform?this._dojoProps+=", lowercase:true ":"3"==this.textTransform&&(this._dojoProps+=", propercase:true ");!0==this.numeric&&(this.textboxBaseClass+=" dijitTextBoxAlignRight");null!=this.tabIndexField&&(this._tabIndex=this.tabIndexField)},destroy:function(){ec.fisa.widget.utils.destroyMultiregisterWidget(this);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._textBox&&(this._textBox.connect(this._textBox,"onChange",dojo.hitch(this,this._onTextBoxBlur)),
this.connect(this._button,"onClick",this._onButtonClick));this._buttonId=this.id+"_button"},buildRendering:function(){this.inherited(arguments);var a=null,a=0<=this.visualSize?this.visualSize:this.listOfValuesConfig[dojo.config.fisaTheme].defaultVisualSize,a=this.listOfValuesConfig[dojo.config.fisaTheme].textCharWidth*a;a>=1.5*this.listOfValuesConfig[dojo.config.fisaTheme].buttonWidth&&(a-=this.listOfValuesConfig[dojo.config.fisaTheme].buttonWidth);!0==this.parentEditableGrid&&null!=this.tdParentWidth&&
a<this.tdParentWidth&&(a=this.tdParentWidth-this.listOfValuesConfig[dojo.config.fisaTheme].gridOffset);this._textBox&&(this._textBox.domNode.style.width=a+"px","1"==this.textTransform&&(this._textBox.textbox.style.textTransform="uppercase"),!0==this.numeric&&(this._textBox.textbox.style.textAlign="right"));!0==this.parentEditableGrid&&this._complementNode&&(this._complementNode._componentNode.style.display="none")},startup:function(){this.inherited(arguments);l.set(this.domNode,"visibility","");if(!1===
this.parentEditableGrid){var a=ec.fisa.controller.utils.getPageController(this["fisa-tab-id"],this["fisa-page-scope-id"]);s.isFunction(a.addParamToModel)&&a.addParamToModel(this)}},_onButtonClick:function(){if("BT"==this.parentType||"BT_HOLD"==this.parentType){var a=this["fisa-tab-id"],b=this["fisa-page-scope-id"],c=this["bt-id"],f=this["field-id"],d=ec.fisa.controller.utils.getPageController(a,b),k={callbackScope:this,callback:this._onButtonClickHandler,errorHandler:dojo.hitch(this,d.errorHandler)},
d=d.model.toPlainObject();if(!0===this.parentEditableGrid){var m=dijit.byId(this.gridId);EventActionDWR.handleLaunchQueryActionLovMultiregister(a,b,c,m.entId,f,this.btPos,d,this.actionMode,this.gridRealRowIndex,k)}else EventActionDWR.handleLaunchQueryActionLov(a,b,c,f,this.btPos,d,this.actionMode,k)}else this._onButtonClickHandler({wAxn:"open"})},_onButtonClickHandler:function(a){var b=this.getController();b.clearPanelMessage();if("error"==a.wAxn)b.updateMsgsPanel(a.aMsgs);else if("open"==a.wAxn){var b=
this["bt-id"],c=this["field-id"],f=this["fisa-tab-id"],d=this["fisa-page-scope-id"],k=this["lov-height"],m=this["lov-width"],e=this["lov-info-mode"],h="["+this.qtTitle+"]",g=dojo.config.fisaContextPath+"/ITEM_QUERY_TEMPLATE/",g=g+this["qt-id"],g=g+"/FISATabId/"+f,g=g+"/doLayout/false/content.jsp";a=b+"_"+c+"_fisaLov";c={content:{parentFisaTabId:f,parentFisaPageScopeId:d,parentBtId:b,parentWidgetId:this.id,parentResourceType:this.parentType,parentFieldId:c,islov:!0}};!0===this.parentEditableGrid&&
(c.content.isLovFromEditableGrid=!0,b=this.getController(),b.dojoFromLovId=this.id);if(!0==e||"true"==e)c.content.lovInfoMode=!0;h={resizeOnLoad:!1,id:a,title:h,href:g,executeScripts:!0,ioArgs:c,ioMethod:dojo.xhrPost};e=ec.fisa.controller.utils.getGlobalModalSize(0.9);k&&k<e.h&&(e.h=k);m&&m<e.w&&(e.w=m);h.style="height:"+e.h+"px;width:"+e.w+"px;";b=ec.fisa.controller.utils.getPageController(f,d);f=null;"ec.fisa.controller.custom.QtController"==b.declaredClass&&!0==b.isLovModal&&(f=this.getParent().getParent().getParent().id,
dijit.byId(f)._childId=a);a=new dojox.widget.DialogSimple(h);a.modalParentId=f;a.resizeContainerNode=this._resizeContainerNode;a.connect(a,"onHide",function(a){a=!0;var b=this._childId;null!=b&&void 0!=b&&dijit.byId(b)&&(a=!1);!0==a&&this.closeF();return!1});a.closeF=function(){var a=this.modalParentId;this.destroyRecursive(!1);null!=a&&(a=dijit.byId(a),a.show(),a.resizeContainerNode(a,a.dialogStyle))};a.show();this._resizeContainerNode(a,e);a.dialogStyle=e}},_resizeContainerNode:function(a,b){var c=
u.getMarginBox(a.titleNode);l.set(a.containerNode,"height",b.h-c.h-4*c.t+"px");l.set(a.containerNode,"width",b.w-this.listOfValuesConfig[dojo.config.fisaTheme].dialogWidthOffset+"px");l.set(a.containerNode,"display","block");l.set(a.containerNode,"overflowY","auto");l.set(a.containerNode,"overflowX","auto");t.add(a.containerNode,"lovContentPane")},_onTextBoxBlur:function(){var a=this["bt-id"],b=this["field-id"],c=this["fisa-tab-id"],f=this["fisa-page-scope-id"],d={callbackScope:this};d.errorHandler=
dojo.hitch(this,this.errorHandler);d.callback=this._executeAutoLovCallback;var k=this.getController();dijit.byId(k.messagesPanelId).clearAllMessages();null!=k.model&&k.model.clearAllMessages();var m="BT",e=null,h=null,g=k.model.toPlainObject();k instanceof ec.fisa.controller.custom.QtController&&(h=g,g=null,m="QT",e=this["action-lov"]||null);var k=this["qt-id"],l=null,n=null,p=!1;if(this.parentEditableGrid){var l=this.entityMrId,q=dijit.byId(this.gridId);!0==q.fisaEditableDirectGrid?p=!0:n=q.model.toPlainObject()}EventActionDWR.loadDataLovTextBoxBlur(c,
f,a,b,m,k,h,g,e,l,this.gridRealRowIndex,this.hasFieldRoutineOrPolicy,n,p,d)},_executeAutoLovCallback:function(a){var b=this.getController();if("error"===a.wAxn)b.updateMsgsPanel(a.aMsgs),this.clearOutputLovData(b);else if("refresh"===a.wAxn){this.setOutputLovData(b,a);if(!(b instanceof ec.fisa.controller.custom.QtController)){var c=v.curNode,f=!0;null!=c&&c.id===this._buttonId&&(f=!1);b.handleCallBackBackFieldRoutine(a,f)}var d=ec.fisa.controller.utils.getPageController(this["fisa-tab-id"],this["fisa-page-scope-id"]);
null!=a.dataUpdate&&void 0!=a.dataUpdate&&(a=a.dataUpdate,null!=a&&void 0!=a&&dojox.lang.functional.forIn(a,dojo.hitch(this,function(a,b){d.updateSelectByOutcome(b,a,d,this.gridRealRowIndex)})))}},clearOutputLovData:function(a){this.setOutputLovData(a,null)},setOutputLovData:function(a,b){var c=this["bt-id"],f=this["field-id"],d=a.lovData[c][f];d&&(dojo.forEach(d.complement,function(d,m){var e=d[0],h="";b&&b.selectedRow&&(h=b.selectedRow[e]);if(this.parentEditableGrid){var e=dijit.byId(this.gridId),
g=null,g=!0==e.fisaEditableDirectGrid?e.complementModel[this.gridRealRowIndex]:e.complementModel;g.setValue([f+"--CMPLMNT"],h,!1)}else a.setFieldModelComplement(c,f,h)},this),dojo.forEach(d.output,function(d,f){var e=d[0],h=d[1],g=null;b&&b.selectedRow&&(g=b.selectedRow[h]);if(this.parentEditableGrid){var h=dijit.byId(this.gridId),l=null,l=!0==h.fisaEditableDirectGrid?h.model[this.gridRealRowIndex]:h.model;l.setValue([e],g,!1)}else a.setFieldModelValue(c,e,g,!1)},this))},getController:function(){return ec.fisa.controller.utils.getPageController(this["fisa-tab-id"],
this["fisa-page-scope-id"])},_getRefAttr:function(){return this._textBox.get("ref")},_setRefAttr:function(a){this._textBox.set("ref",a)},_getRefCmplAttr:function(){return this._complementNode.get("ref")},_setRefCmplAttr:function(a){this._complementNode.set("ref",a)},_getBindingAttr:function(a){return this._textBox.get("binding")},_setBindingAttr:function(){this._textBox.set("binding",value)},_getValueAttr:function(){return this._textBox.get("value")},_setValueAttr:function(a,b,c){c=null;c=null==a?
"":""+a;this._textBox.set("value",c,b);"boolean"===typeof b&&!b&&(this._textBox._pendingOnChange=!1,this._textBox._lastValueReported=c)},_getComplementAttr:function(){return this._complementNode.get("value")},_setComplementAttr:function(a,b,c){!0==this.parentEditableGrid&&(this._complementNode._componentNode.style.display="block");this._complementNode.set("value",a)},_setEnabledAttr:function(a){null!=a&&(a?(this.selectLabel=this.selectLabelOrig,ec.fisa.widget.utils.enableWidget(this._button),this.editable?
(dojo.removeClass(this._button.domNode,"fisaLovDisabled"),ec.fisa.widget.utils.enableWidget(this._textBox)):(dojo.replaceClass(this._button.domNode,"fisaLovOnlySelect","fisaLovDisabled"),ec.fisa.widget.utils.disableWidget(this._textBox))):(ec.fisa.widget.utils.disableWidget(this._textBox),ec.fisa.widget.utils.disableWidget(this._button),this.editable?dojo.addClass(this._button.domNode,"fisaLovDisabled"):dojo.replaceClass(this._button.domNode,"fisaLovDisabled","fisaLovOnlySelect")))},_getEnabledAttr:function(){return ec.fisa.widget.utils.isEnabled(this._button)}})});
//@ sourceMappingURL=ListOfValues.js.map