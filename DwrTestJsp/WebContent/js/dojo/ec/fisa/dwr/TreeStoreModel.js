//>>built
define("ec/fisa/dwr/TreeStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dijit/tree/TreeStoreModel"],function(h,m,n,q,p){return m("ec.fisa.dwr.TreeStoreModel",p,{mayHaveChildren:function(b){return h.some(this.childrenAttrs,function(a){return"id"==b?this.store.hasAttribute(b,a):!1===this.store.getValue(b,"leaf")},this)},getRoot:function(b,a){this.root?b(this.root):this.store.fetch({query:this.query,onComplete:n.hitch(this,function(a){this.root=a[0];b(this.root)}),
onError:a})},getChildren:function(b,a,d){for(var f=this.store,c=[],e=0;e<this.childrenAttrs.length;e++){var g=f.getValues(b,this.childrenAttrs[e]),k=[];h.forEach(g,function(a){null!=a&&k.push(a)},this);delete g;c=c.concat(k)}var l=0;0==l?a(c):h.forEach(c,function(b,e){f.isItemLoaded(b)||f.loadItem({item:b,onItem:function(b){c[e]=b;0==--l&&a(c)},onError:d})})},newItem:function(b,a,d){var f={parent:a,attribute:this.childrenAttrs[0]},c;this.newItemIdAttr&&b[this.newItemIdAttr]?this.fetchItemByIdentity({identity:dijit.byId(b[this.newItemIdAttr]).item,
scope:this,onItem:function(e){e?this.pasteItem(e,null,a,!0,d):(c=this.store.newItem(b,f))&&void 0!=d&&this.pasteItem(c,a,a,!1,d)}}):(c=this.store.newItem(b,f))&&void 0!=d&&this.pasteItem(c,a,a,!1,d)},pasteItem:function(b,a,d,f,c){var e=this.store,g=this.childrenAttrs[0];a&&h.forEach(this.childrenAttrs,dojo.hitch(this,function(c){if(e.containsValue(a,c,b)){if(!f){var d=h.filter(e.getValues(a,c),function(a){return a!=b});this.sendMovedItem(a,b);e.setValues(a,c,d)}g=c}}));if(d)if("number"==typeof c){var k=
e.getValues(d,g).slice();k.splice(c,0,b);this.sendNewItem(b);e.setValues(d,g,k)}else{c=e.getValues(d,g);var l=[];h.forEach(c,function(a){null!=a&&l.push(a)},this);delete c;this.sendNewItem(b);e.setValues(d,g,l.concat(b))}},getIdentity:function(b){var a=b[this.newItemIdAttr];"undefined"===typeof a&&(a=b);return this.store.getIdentity(a)},deleteItem:function(b,a){var d=this.store,f=this.childrenAttrs[0],c=d.getValues(a,f),e=[];h.forEach(c,function(a){null!=a&&a!=b&&e.push(a)},this);delete preValss;
d.setValues(a,f,e);d.deleteItem(b)},findTreeItem:function(b,a){var d=[];if("undefined"===typeof b||null==b)return d;var f=this.store._entries[a].data.items;if(null!=f)for(var c=0;c<f.length;c++)this.iterateTree(b,this.store._entries[f[c]],[a],d);return d},iterateTree:function(b,a,d,f){if(!(void 0==a||null==a)){for(var c=[],e=a.data,g=0;g<d.length;g++)c.push(d[g]);c.push(a.$id);-1!==e.name.toLowerCase().indexOf(b.toLowerCase())&&f.push(c);a=e.items;if(null!=a)for(d=0;d<a.length;d++)this.iterateTree(b,
this.store._entries[a[d]],c,f);delete c}},sendNewItem:function(b){},sendMovedItem:function(b,a){}})});
//@ sourceMappingURL=TreeStoreModel.js.map